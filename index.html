<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="default-src * 'unsafe-inline' 'unsafe-eval'; script-src * 'unsafe-inline' 'unsafe-eval'; connect-src * 'unsafe-inline'; img-src * data: blob: 'unsafe-inline'; frame-src *; style-src * 'unsafe-inline';">
    <title>Climbing Wrapped</title>
    
    <!-- CSS Dependencies -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nouislider@14.6.3/distribute/nouislider.min.css">
    <link rel="stylesheet" href="styles.css">
    
    <!-- JavaScript Dependencies -->
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/papaparse@5.3.0/papaparse.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/nouislider@14.6.3/distribute/nouislider.min.js"></script>
</head>
<body>
    <div class="dashboard">
        <header>
            <h1>Climbing Wrapped</h1>
        </header>

        <div class="csv-input">
            <div class="csv-instructions">
                <p>Download your mountain project csv and paste here.</p>
                <a href="https://www.mountainproject.com/user/200796563/bobby-heidkamp/ticks" target="_blank" class="mp-link">https://www.mountainproject.com/user/200796563/bobby-heidkamp/ticks</a>
            </div>
            <textarea id="csvInput" placeholder="paste your mountain project csv here and click generate dashboard..."></textarea>
            <button id="regenerateBtn" class="regenerate-btn">Generate Dashboard</button>
        </div>

        <div class="date-filter">
            <div class="date-inputs">
                <div class="date-input-group">
                    <label for="startDate">Start Date:</label>
                    <input type="date" id="startDate" class="date-input">
                </div>
                <div class="date-input-group">
                    <label for="endDate">End Date:</label>
                    <input type="date" id="endDate" class="date-input">
                </div>
            </div>
        </div>

        <div class="dashboard-grid">
            <div class="dashboard-item">
                <h3>Total Routes Summary</h3>
                <div class="stats-container" id="totalStats"></div>
            </div>

            <div class="dashboard-item">
                <h3>Grade Distribution</h3>
                <canvas id="gradeChart"></canvas>
            </div>

            <div class="dashboard-item full-width">
                <h3>Geographic Distribution</h3>
                <div id="map"></div>
            </div>

            <div class="dashboard-item full-width">
                <h3>Climbing Journal</h3>
                <div class="journal-container" id="journalContainer"></div>
            </div>

            <div class="dashboard-item full-width">
                <h3>Crags Climbed</h3>
                <div class="crags-container" id="cragsContainer"></div>
            </div>
        </div>

        <div class="disclaimer">
            <h4>Disclaimers & Notes</h4>
            <ul>
                <li>Please excuse the code quality. This was built almost entirely by <a href="https://cursor.sh/" target="_blank">Cursor AI</a></li>
                <li>All imported rows are counted in totals (sends, attempts, etc.) and all pitches for length</li>
                <li>Map locations are wonky and some areas might not work</li>
                <li>Code on <a href="https://github.com/bheidkamp3/bheidkamp3.github.io" target="_blank">github</a></li>
                <li>Be safe, climb stuff, have fun! üßó‚Äç‚ôÇÔ∏è</li>
            </ul>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
